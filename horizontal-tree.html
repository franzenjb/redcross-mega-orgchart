<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>American Red Cross - SE & Caribbean Division Organizational Chart</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
            overflow: auto;
        }
        
        #header {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-bottom: 3px solid #ED1B2E;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }
        
        #header h1 {
            margin: 0;
            color: #ED1B2E;
            font-size: 24px;
        }
        
        #controls {
            background: white;
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            position: fixed;
            top: 73px;
            left: 0;
            right: 0;
            z-index: 999;
        }
        
        #controls button {
            padding: 8px 16px;
            background: #ED1B2E;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        #controls button:hover {
            background: #c41e3a;
        }
        
        #controls input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            width: 250px;
        }
        
        #controls select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            min-width: 180px;
        }
        
        #chart-container {
            margin-top: 140px;
            padding: 40px;
            overflow: auto;
            min-height: calc(100vh - 140px);
        }
        
        /* Horizontal Tree Layout */
        .horizontal-tree {
            display: flex;
            padding: 40px;
            white-space: nowrap;
        }
        
        .level-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            margin-right: 80px;
            position: relative;
        }
        
        .level-container::after {
            content: '';
            position: absolute;
            right: -40px;
            top: 0;
            bottom: 0;
            width: 1px;
            background: #ddd;
        }
        
        .level-container:last-child::after {
            display: none;
        }
        
        .level-header {
            position: absolute;
            top: -30px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .nodes-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: flex-start;
        }
        
        .node-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .node {
            padding: 10px 15px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            min-width: 180px;
            max-width: 220px;
            position: relative;
            white-space: normal;
        }
        
        .node:hover {
            transform: translateX(3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .node-title {
            font-weight: 600;
            font-size: 11px;
            margin-bottom: 3px;
            opacity: 0.9;
        }
        
        .node-name {
            font-size: 14px;
            margin-bottom: 2px;
            font-weight: 500;
        }
        
        .node-location {
            font-size: 11px;
            opacity: 0.8;
            font-style: italic;
        }
        
        .connector-horizontal {
            position: absolute;
            height: 1px;
            background: #ccc;
            right: -40px;
            top: 50%;
            width: 40px;
        }
        
        /* Vertical Tree (classic) Layout */
        .vertical-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
        }
        
        .vertical-level {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 60px;
            position: relative;
        }
        
        .vertical-level-header {
            position: absolute;
            left: -100px;
            top: 50%;
            transform: translateY(-50%) rotate(-90deg);
            background: #333;
            color: white;
            padding: 5px 20px;
            font-size: 12px;
            font-weight: 600;
            border-radius: 4px;
            white-space: nowrap;
        }
        
        .vertical-node-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .connector-vertical {
            width: 1px;
            height: 40px;
            background: #ccc;
            margin: 0 auto;
        }
        
        /* Division section */
        .division-section {
            background: rgba(237, 27, 46, 0.03);
            border: 2px dashed #ED1B2E;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .division-header {
            text-align: center;
            color: #ED1B2E;
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 14px;
            text-transform: uppercase;
        }
        
        .division-roles {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        /* Regional sections */
        .region-group {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background: white;
        }
        
        .region-header {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 4px;
            text-align: center;
        }
        
        /* Color classes */
        .division { background: #ED1B2E; }
        .divisional-role { background: #8B0000; }
        .georgia { background: #2E86AB; }
        .alabama { background: #A23B72; }
        .northcarolina { background: #F18F01; }
        .southcarolina { background: #C73E1D; }
        .tennessee { background: #6B4423; }
        .ncflorida { background: #00A86B; }
        .sflorida { background: #FF6B9D; }
        .vacant { background: #666666; }
        
        .georgia-header { background: rgba(46, 134, 171, 0.1); color: #2E86AB; }
        .alabama-header { background: rgba(162, 59, 114, 0.1); color: #A23B72; }
        .northcarolina-header { background: rgba(241, 143, 1, 0.1); color: #F18F01; }
        .southcarolina-header { background: rgba(199, 62, 29, 0.1); color: #C73E1D; }
        .tennessee-header { background: rgba(107, 68, 35, 0.1); color: #6B4423; }
        .ncflorida-header { background: rgba(0, 168, 107, 0.1); color: #00A86B; }
        .sflorida-header { background: rgba(255, 107, 157, 0.1); color: #FF6B9D; }
        
        .highlight {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { 
                box-shadow: 0 2px 4px rgba(0,0,0,0.2), 0 0 0 3px rgba(237, 27, 46, 0.6);
                transform: scale(1.05);
            }
            50% { 
                box-shadow: 0 2px 4px rgba(0,0,0,0.2), 0 0 0 6px rgba(237, 27, 46, 0.3);
                transform: scale(1.08);
            }
        }
        
        #legend {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            z-index: 1000;
            font-size: 13px;
        }
        
        #legend h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #333;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border-radius: 3px;
            border: 1px solid #ddd;
        }
        
        #stats {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            font-size: 13px;
            z-index: 900;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
            gap: 20px;
        }
        
        .stat-label {
            color: #666;
        }
        
        .stat-value {
            font-weight: 600;
            color: #ED1B2E;
        }
    </style>
    <script src="deep-org-data.js"></script>
</head>
<body>
    <div id="header">
        <h1>American Red Cross - SE & Caribbean Division</h1>
        <p>Complete Organizational Structure - True Horizontal Layout</p>
    </div>
    
    <div id="controls">
        <input type="text" id="searchBox" placeholder="Search by name, position, or location..." onkeyup="handleSearch(this.value)">
        <select id="viewMode" onchange="changeView(this.value)">
            <option value="overview">Division Overview</option>
            <option value="georgia">Georgia Region</option>
            <option value="alabama">Alabama/Mississippi</option>
            <option value="northcarolina">North Carolina</option>
            <option value="southcarolina">South Carolina</option>
            <option value="tennessee">Tennessee</option>
            <option value="ncflorida">N/C Florida</option>
            <option value="sflorida">South Florida</option>
        </select>
        <button id="layoutToggle" onclick="toggleLayout()">Switch to Vertical</button>
        <button onclick="expandAll()">Expand All</button>
        <button onclick="collapseAll()">Collapse to Level 2</button>
    </div>
    
    <div id="stats">
        <h4>Statistics</h4>
        <div class="stat-item">
            <span class="stat-label">Total Positions:</span>
            <span class="stat-value" id="totalPositions">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Current View:</span>
            <span class="stat-value" id="currentView">Overview</span>
        </div>
    </div>
    
    <div id="legend">
        <h3>Color Coding</h3>
        <div class="legend-item">
            <div class="legend-color" style="background: #ED1B2E;"></div>
            <span>Division VP</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #8B0000;"></div>
            <span>Division-Wide</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #2E86AB;"></div>
            <span>Georgia</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #A23B72;"></div>
            <span>Alabama/MS</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #F18F01;"></div>
            <span>North Carolina</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #C73E1D;"></div>
            <span>South Carolina</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #6B4423;"></div>
            <span>Tennessee</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #00A86B;"></div>
            <span>N/C Florida</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF6B9D;"></div>
            <span>South Florida</span>
        </div>
    </div>
    
    <div id="chart-container"></div>
    
    <script>
        let currentLayout = 'horizontal';
        let currentView = 'overview';
        let currentDepth = 3;
        
        function buildHorizontalChart(data, maxDepth = 3) {
            const container = document.getElementById('chart-container');
            container.innerHTML = '';
            
            const horizontalTree = document.createElement('div');
            horizontalTree.className = 'horizontal-tree';
            
            // Build levels array
            const levels = [];
            
            // Level 1: Division VP
            levels.push([{
                name: "Anna Trefethen",
                title: "Division Vice President",
                location: "SE & Caribbean Division",
                type: "division"
            }]);
            
            // Level 2: Division-Wide Leadership
            levels.push([
                { name: "Dee Dixon", title: "DFVP", type: "divisional-role" },
                { name: "Vickey Barnett", title: "Dir. Division Fundraising", type: "divisional-role" },
                { name: "Kay Gonzalez", title: "Div. SAF Director", type: "divisional-role" },
                { name: "Leisle Mims", title: "DCOO", type: "divisional-role" },
                { name: "Silvia Taylor", title: "DVSE", type: "divisional-role" },
                { name: "Cally Edwards", title: "DCD", type: "divisional-role" },
                { name: "Ryan Lock", title: "DDE", type: "divisional-role" }
            ]);
            
            // Level 3: Regional Executives
            const regionalExecs = [];
            if (currentView === 'overview' || currentView === 'georgia') {
                regionalExecs.push({
                    name: "Alicia Doherty",
                    title: "Regional Chief Executive",
                    location: "Atlanta",
                    type: "georgia"
                });
            }
            if (currentView === 'overview' || currentView === 'alabama') {
                regionalExecs.push({
                    name: "M. Beddingfield",
                    title: "Regional Executive",
                    location: "Birmingham",
                    type: "alabama"
                });
            }
            if (currentView === 'overview' || currentView === 'northcarolina') {
                regionalExecs.push({
                    name: "A. Taylor",
                    title: "Regional Executive",
                    location: "North Carolina",
                    type: "northcarolina"
                });
            }
            if (currentView === 'overview' || currentView === 'southcarolina') {
                regionalExecs.push({
                    name: "Susan Everitt",
                    title: "Regional Executive",
                    location: "South Carolina",
                    type: "southcarolina"
                });
            }
            if (currentView === 'overview' || currentView === 'tennessee') {
                regionalExecs.push({
                    name: "J. Sullivan",
                    title: "Regional Executive",
                    location: "Nashville",
                    type: "tennessee"
                });
            }
            if (currentView === 'overview' || currentView === 'ncflorida') {
                regionalExecs.push({
                    name: "C. Smith",
                    title: "Regional Executive",
                    location: "Jacksonville",
                    type: "ncflorida"
                });
            }
            if (currentView === 'overview' || currentView === 'sflorida') {
                regionalExecs.push({
                    name: "Krista Coletti",
                    title: "Regional Executive",
                    location: "Miami",
                    type: "sflorida"
                });
            }
            levels.push(regionalExecs);
            
            // Level 4: Regional Directors (sample for each region)
            if (currentView !== 'overview' && maxDepth > 3) {
                const directors = [];
                
                if (currentView === 'georgia' && deepOrgData.georgia) {
                    deepOrgData.georgia.children.forEach(child => {
                        directors.push({
                            name: child.name,
                            title: child.title,
                            location: child.location,
                            type: child.type || 'georgia'
                        });
                    });
                } else if (currentView === 'alabama' && deepOrgData.alabama) {
                    deepOrgData.alabama.children.forEach(child => {
                        directors.push({
                            name: child.name,
                            title: child.title,
                            location: child.location,
                            type: child.type || 'alabama'
                        });
                    });
                } else if (currentView === 'ncflorida' && deepOrgData.ncflorida) {
                    deepOrgData.ncflorida.children.forEach(child => {
                        directors.push({
                            name: child.name,
                            title: child.title,
                            location: child.location,
                            type: child.type || 'ncflorida'
                        });
                    });
                } else if (currentView === 'sflorida' && deepOrgData.sflorida) {
                    deepOrgData.sflorida.children.forEach(child => {
                        directors.push({
                            name: child.name,
                            title: child.title,
                            location: child.location,
                            type: child.type || 'sflorida'
                        });
                    });
                } else if (currentView === 'tennessee' && deepOrgData.tennessee) {
                    deepOrgData.tennessee.children.forEach(child => {
                        directors.push({
                            name: child.name,
                            title: child.title,
                            location: child.location,
                            type: child.type || 'tennessee'
                        });
                    });
                } else if (currentView === 'northcarolina' && deepOrgData.northcarolina) {
                    deepOrgData.northcarolina.children.forEach(child => {
                        directors.push({
                            name: child.name,
                            title: child.title,
                            location: child.location,
                            type: child.type || 'northcarolina'
                        });
                    });
                } else if (currentView === 'southcarolina' && deepOrgData.southcarolina) {
                    deepOrgData.southcarolina.children.forEach(child => {
                        directors.push({
                            name: child.name,
                            title: child.title,
                            location: child.location,
                            type: child.type || 'southcarolina'
                        });
                    });
                }
                
                if (directors.length > 0) {
                    levels.push(directors);
                }
            }
            
            // Create level containers
            const levelHeaders = ['Division VP', 'Division Leadership', 'Regional Executives', 'Regional Directors', 'Managers', 'Specialists'];
            
            levels.forEach((level, index) => {
                if (level.length === 0) return;
                
                const levelContainer = document.createElement('div');
                levelContainer.className = 'level-container';
                
                const levelHeader = document.createElement('div');
                levelHeader.className = 'level-header';
                levelHeader.textContent = levelHeaders[index];
                levelContainer.appendChild(levelHeader);
                
                const nodesColumn = document.createElement('div');
                nodesColumn.className = 'nodes-column';
                
                // Special handling for division-wide roles
                if (index === 1) {
                    const divSection = document.createElement('div');
                    divSection.className = 'division-section';
                    
                    const divHeader = document.createElement('div');
                    divHeader.className = 'division-header';
                    divHeader.textContent = 'Division-Wide Leadership';
                    divSection.appendChild(divHeader);
                    
                    const rolesContainer = document.createElement('div');
                    rolesContainer.className = 'division-roles';
                    
                    level.forEach(person => {
                        const node = createNode(person);
                        rolesContainer.appendChild(node);
                    });
                    
                    divSection.appendChild(rolesContainer);
                    nodesColumn.appendChild(divSection);
                } else {
                    // Group by region if applicable
                    if (index === 3 && currentView !== 'overview') {
                        const regionGroup = document.createElement('div');
                        regionGroup.className = 'region-group';
                        
                        const regionHeader = document.createElement('div');
                        regionHeader.className = `region-header ${currentView}-header`;
                        regionHeader.textContent = getRegionName(currentView);
                        regionGroup.appendChild(regionHeader);
                        
                        level.forEach(person => {
                            const node = createNode(person);
                            if (index < levels.length - 1) {
                                const connector = document.createElement('div');
                                connector.className = 'connector-horizontal';
                                node.appendChild(connector);
                            }
                            regionGroup.appendChild(node);
                        });
                        
                        nodesColumn.appendChild(regionGroup);
                    } else {
                        level.forEach(person => {
                            const node = createNode(person);
                            if (index < levels.length - 1) {
                                const connector = document.createElement('div');
                                connector.className = 'connector-horizontal';
                                node.appendChild(connector);
                            }
                            nodesColumn.appendChild(node);
                        });
                    }
                }
                
                levelContainer.appendChild(nodesColumn);
                horizontalTree.appendChild(levelContainer);
            });
            
            container.appendChild(horizontalTree);
            updateStats();
        }
        
        function buildVerticalChart() {
            const container = document.getElementById('chart-container');
            container.innerHTML = '';
            
            const verticalTree = document.createElement('div');
            verticalTree.className = 'vertical-tree';
            
            // Division VP
            const level1 = document.createElement('div');
            level1.className = 'vertical-level';
            const vpNode = createNode({
                name: "Anna Trefethen",
                title: "Division Vice President",
                location: "SE & Caribbean Division",
                type: "division"
            });
            level1.appendChild(vpNode);
            verticalTree.appendChild(level1);
            
            // Connector
            const connector1 = document.createElement('div');
            connector1.className = 'connector-vertical';
            verticalTree.appendChild(connector1);
            
            // Division Leadership
            const level2 = document.createElement('div');
            level2.className = 'vertical-level';
            
            const divSection = document.createElement('div');
            divSection.className = 'division-section';
            
            const divHeader = document.createElement('div');
            divHeader.className = 'division-header';
            divHeader.textContent = 'Division-Wide Leadership (Serving All Regions)';
            divSection.appendChild(divHeader);
            
            const divRoles = document.createElement('div');
            divRoles.className = 'division-roles';
            
            const divLeaders = [
                { name: "Dee Dixon", title: "DFVP", type: "divisional-role" },
                { name: "Vickey Barnett", title: "Dir. Division Fundraising", type: "divisional-role" },
                { name: "Kay Gonzalez", title: "Div. SAF Director", type: "divisional-role" },
                { name: "Leisle Mims", title: "DCOO", type: "divisional-role" },
                { name: "Silvia Taylor", title: "DVSE", type: "divisional-role" },
                { name: "Cally Edwards", title: "DCD", type: "divisional-role" },
                { name: "Ryan Lock", title: "DDE", type: "divisional-role" }
            ];
            
            divLeaders.forEach(leader => {
                divRoles.appendChild(createNode(leader));
            });
            
            divSection.appendChild(divRoles);
            level2.appendChild(divSection);
            verticalTree.appendChild(level2);
            
            // Connector
            const connector2 = document.createElement('div');
            connector2.className = 'connector-vertical';
            verticalTree.appendChild(connector2);
            
            // Regional Executives
            const level3 = document.createElement('div');
            level3.className = 'vertical-level';
            
            const regions = [
                { name: "Alicia Doherty", title: "Regional Chief Executive", location: "Atlanta", type: "georgia" },
                { name: "M. Beddingfield", title: "Regional Executive", location: "Birmingham", type: "alabama" },
                { name: "A. Taylor", title: "Regional Executive", location: "North Carolina", type: "northcarolina" },
                { name: "Susan Everitt", title: "Regional Executive", location: "South Carolina", type: "southcarolina" },
                { name: "J. Sullivan", title: "Regional Executive", location: "Nashville", type: "tennessee" },
                { name: "C. Smith", title: "Regional Executive", location: "Jacksonville", type: "ncflorida" },
                { name: "Krista Coletti", title: "Regional Executive", location: "Miami", type: "sflorida" }
            ];
            
            regions.forEach(region => {
                if (currentView === 'overview' || currentView === region.type) {
                    level3.appendChild(createNode(region));
                }
            });
            
            verticalTree.appendChild(level3);
            container.appendChild(verticalTree);
            updateStats();
        }
        
        function createNode(person) {
            const node = document.createElement('div');
            node.className = `node ${person.type || 'vacant'}`;
            node.innerHTML = `
                <div class="node-name">${person.name}</div>
                <div class="node-title">${person.title}</div>
                ${person.location ? `<div class="node-location">${person.location}</div>` : ''}
            `;
            node.onclick = () => handleNodeClick(person);
            return node;
        }
        
        function handleNodeClick(person) {
            console.log('Clicked:', person);
            // Could open detail view or zoom to person's full team
        }
        
        function toggleLayout() {
            if (currentLayout === 'horizontal') {
                currentLayout = 'vertical';
                document.getElementById('layoutToggle').textContent = 'Switch to Horizontal';
                buildVerticalChart();
            } else {
                currentLayout = 'horizontal';
                document.getElementById('layoutToggle').textContent = 'Switch to Vertical';
                buildHorizontalChart();
            }
        }
        
        function changeView(view) {
            currentView = view;
            document.getElementById('currentView').textContent = getRegionName(view);
            if (currentLayout === 'horizontal') {
                buildHorizontalChart(null, view === 'overview' ? 3 : 5);
            } else {
                buildVerticalChart();
            }
        }
        
        function getRegionName(view) {
            const names = {
                'overview': 'Division Overview',
                'georgia': 'Georgia Region',
                'alabama': 'Alabama/Mississippi',
                'northcarolina': 'North Carolina',
                'southcarolina': 'South Carolina',
                'tennessee': 'Tennessee',
                'ncflorida': 'North/Central Florida',
                'sflorida': 'South Florida'
            };
            return names[view] || view;
        }
        
        function expandAll() {
            if (currentLayout === 'horizontal') {
                buildHorizontalChart(null, 5);
            } else {
                buildVerticalChart();
            }
        }
        
        function collapseAll() {
            if (currentLayout === 'horizontal') {
                buildHorizontalChart(null, 2);
            } else {
                buildVerticalChart();
            }
        }
        
        function handleSearch(query) {
            document.querySelectorAll('.node').forEach(node => {
                node.classList.remove('highlight');
                if (query.length > 2 && node.textContent.toLowerCase().includes(query.toLowerCase())) {
                    node.classList.add('highlight');
                }
            });
        }
        
        function updateStats() {
            const totalNodes = document.querySelectorAll('.node').length;
            document.getElementById('totalPositions').textContent = totalNodes;
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            buildHorizontalChart();
        });
    </script>
</body>
</html>